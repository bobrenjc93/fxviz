(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8414:function(e,t,a){Promise.resolve().then(a.bind(a,7340))},7340:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7437),r=a(2265),s=a(2500),i=a(9880);function l(){var e;let[t,a]=(0,r.useState)(localStorage.getItem("fxviz:last")||""),[l,c]=(0,r.useState)(""),[o,d]=(0,r.useState)({kind:"idle"}),[u,m]=(0,r.useState)(!0),h=(0,r.useRef)(null),p=(0,r.useRef)(!1),[v,x]=(0,r.useState)(50),g=(0,r.useCallback)(e=>{p.current=!0;try{e.currentTarget.setPointerCapture(e.pointerId)}catch(e){}},[]);(0,r.useEffect)(()=>{let e=e=>{if(!p.current||!h.current)return;let t=h.current.getBoundingClientRect();x(Math.max(20,Math.min(80,(e.clientX-t.left)/t.width*100)))},t=()=>{p.current=!1};return window.addEventListener("pointermove",e),window.addEventListener("pointerup",t),()=>{window.removeEventListener("pointermove",e),window.removeEventListener("pointerup",t)}},[]);let k=(0,r.useMemo)(()=>({gridTemplateColumns:"minmax(200px, ".concat(v,"%) 6px minmax(200px, ").concat(100-v,"%)")}),[v]);(0,r.useEffect)(()=>{localStorage.setItem("fxviz:last",t)},[t]);let b=(0,r.useRef)(null),f=(0,r.useCallback)(async()=>{if(b.current)return b.current;d({kind:"loading",step:"Loading Python runtime"});try{let e=Function("u","return import(u)"),t=await e("https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.mjs"),a=await t.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.24.1/full/"});return d({kind:"loading",step:"Installing Black"}),await a.loadPackage(["micropip"]),await a.runPythonAsync("import micropip\nawait micropip.install('black==24.8.0')\nimport black"),b.current=a,d({kind:"ready",engine:"black"}),a}catch(e){throw console.error(e),d({kind:"error",message:String((null==e?void 0:e.message)||e)}),e}},[]),y=(0,r.useCallback)(async()=>{if(!(null==t?void 0:t.trim())){c("");return}try{let e=await f();d({kind:"loading",step:"Formatting with Black"}),e.globals.set("__SRC__",t);let a=await e.runPythonAsync(["import black","mode = black.Mode(line_length=".concat(120,")"),"black.format_str(__SRC__, mode=mode)"].join("\n"));c(a),d({kind:"ready",engine:"black"})}catch(e){c(t)}},[t,f]);(0,r.useEffect)(()=>{if(!(null==t?void 0:t.trim())){c("");return}let e=setTimeout(()=>{y()},400);return()=>clearTimeout(e)},[t,y]);let w=(0,r.useCallback)(async e=>{e.clipboardData.getData("text/plain")&&setTimeout(y,0)},[y]),j=(0,r.useCallback)(async()=>{try{await navigator.clipboard.writeText(l||t||"")}catch(e){}},[l,t]),N=(0,r.useMemo)(()=>{let e=l||t||"";return{lines:e?e.split(/\n/).length:0,chars:e.length}},[l,t]);return(0,n.jsxs)("div",{className:"app",children:[(0,n.jsxs)("div",{className:"header",children:[(0,n.jsx)("div",{className:"title",children:"PyGraph Formatter"}),(0,n.jsxs)("div",{className:"status muted",children:["loading"===o.kind&&(0,n.jsxs)("span",{children:["⏳ ",null!==(e=o.step)&&void 0!==e?e:"Working..."]}),"ready"===o.kind&&(0,n.jsx)("span",{children:"✅ Formatter ready"}),"error"===o.kind&&(0,n.jsx)("span",{children:"⚠️ Formatter unavailable"})]})]}),(0,n.jsxs)("div",{className:"container",ref:h,style:k,children:[(0,n.jsxs)("section",{className:"pane",children:[(0,n.jsxs)("div",{className:"toolbar",children:[(0,n.jsx)("button",{className:"btn",onClick:y,disabled:!t.trim(),children:"Format with Black"}),(0,n.jsx)("button",{className:"btn",onClick:()=>a(""),children:"Clear"}),(0,n.jsx)("div",{className:"muted",style:{marginLeft:"auto"},children:"Paste your Python graph trace here"})]}),(0,n.jsx)("textarea",{className:"textarea",placeholder:"Paste Python here...",value:t,onChange:e=>a(e.target.value),onPaste:w}),(0,n.jsx)("div",{className:"footer",children:(0,n.jsxs)("div",{className:"stats",children:["Input: ",t.split(/\n/).length||0," lines, ",t.length," chars"]})})]}),(0,n.jsx)("div",{className:"resizer",onPointerDown:g,role:"separator","aria-orientation":"vertical","aria-label":"Resize panels"}),(0,n.jsxs)("section",{className:"pane paneRight",children:[(0,n.jsxs)("div",{className:"toolbar",children:[(0,n.jsx)("button",{className:"btn",onClick:j,disabled:!t.trim(),children:"Copy"}),(0,n.jsxs)("button",{className:"btn",onClick:()=>m(e=>!e),children:[u?"Disable":"Enable"," Wrap"]})]}),(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("div",{className:"previewWrap",children:(0,n.jsx)(s.Z,{language:"python",style:i.Z,wrapLongLines:u,customStyle:{background:"transparent",maxWidth:"".concat(120,"ch"),whiteSpace:u?"pre-wrap":void 0,overflowWrap:u?"anywhere":void 0},codeTagProps:{className:"codeBlock"},showLineNumbers:!0,children:l||t||""})})}),(0,n.jsx)("div",{className:"footer",children:(0,n.jsxs)("div",{className:"stats",children:["Output: ",N.lines," lines, ",N.chars," chars"]})})]})]})]})}}},function(e){e.O(0,[713,971,117,744],function(){return e(e.s=8414)}),_N_E=e.O()}]);